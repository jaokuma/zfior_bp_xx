sap.ui.define(["bpmaint/bpmaint/controller/BaseController","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,o,r){"use strict";return t.extend("bpmaint.bpmaint.controller.BPDetail",{onInit:function(){this.attachRoute("ToBPDisplay",this.onRouteMatched);this.attachRoute("ToBPEdit",this.onRouteMatched);this.attachRoute("ToBPCreate",this.onRouteMatched)},onRouteMatched:function(t){var e=t.getParameter("name");var o=this.getView();if(e==="ToBPEdit"||e==="ToBPDisplay"){var r=t.getParameter("arguments").PartnerId;o.bindElement("/BusinessPartnerSet('"+r+"')")}else if(e==="ToBPCreate"){o.unbindContext();var i=o.getModel();var n=i.createEntry("/BusinessPartnerSet",{properties:{PartnerId:"",PartnerType:"",PartnerName1:"",PartnerName2:"",SearchTerm1:"",SearchTerm2:"",Street:"",HouseNumber:"",District:"",City:"",Region:"",ZipCode:"",Country:""}});o.setBindingContext(n)}if(e==="ToBPEdit"||e==="ToBPCreate"){this.setEditableControls(true)}else{this.setEditableControls(false)}switch(e){case"ToBPEdit":this._sOperation="Edit";break;case"ToBPDisplay":this._sOperation="Display";break;case"ToBPCreate":this._sOperation="Create";break}},setEditableControls:function(t){var e=new sap.ui.model.json.JSONModel;if(t){e.loadData("model/controlsOpened.json")}else{e.loadData("model/controlsClosed.json")}var o=this.getView();o.setModel(e,"control")},onSavePress:function(t){var o=this;var r=this.getView();var i=r.getModel();switch(this._sOperation){case"Edit":i.submitChanges({success:function(t,r){e.success(o.getText("msgBPUpdated"),{title:o.getText("txtBPUpdated"),onClose:function(t){o.getRouter().navTo("ToBPList")}})},error:function(t){e.error(o.getText("msgBPUpdError"),{title:o.getText("txtBPUpdError")})}});break;case"Create":var n=r.getBindingContext().getObject();i.create("/BusinessPartnerSet",n,{success:function(t,r){e.success(o.getText("msgBPCreated",[n.PartnerId]),{title:o.getText("txtBPCreated"),onClose:function(t){o.getRouter().navTo("ToBPList")}})},error:function(t){e.error(o.getText("msgBPCrtError"),{title:o.getText("txtBPCrtError")})}});break}},onCancelPress:function(t){var o=this;e.show(this.getText("msgBPCancel"),{title:this.getText("txtBPCancel"),actions:[e.Action.YES,e.Action.NO],onClose:function(t){if(t===e.Action.YES)o.getRouter().navTo("ToBPList")}})},openCountryDialog:function(t){if(!this._oCountryDialog){this._oCountryDialog=sap.ui.xmlfragment("bpmaint.bpmaint.fragments.CountryDialog",this);this.getView().addDependent(this._oCountryDialog)}this._oCountryDialog.open()},onSearchCountryDialog:function(t){var e=t.getParameter("value");var i=new o("LandName",r.Contains,e);var n=t.getSource().getBinding("items");n.filter([i])},onCloseCountryDialog:function(t){var e=t.getParameter("selectedItem"),o=this.byId("inputCountry");if(e){o.setValue(e.getTitle());o.setDescription(e.getDescription())}else{o.resetProperty("value");o.resetProperty("description")}}})});